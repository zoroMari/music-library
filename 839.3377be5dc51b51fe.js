"use strict";(self.webpackChunkmusic_library=self.webpackChunkmusic_library||[]).push([[839],{839:(z,p,a)=>{a.r(p),a.d(p,{GenreModule:()=>W});var l=a(6895),c=a(4006),m=a(3456),d=a(9390),h=a(4004),e=a(4650),g=a(8270),C=a(9506),S=a(8372),v=a(4859),f=a(7392),O=a(3683),x=a(2673),_=a(9549),A=a(4144);function F(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"button",10),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.handleCloseSearch())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function P(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"button",11),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.handleOpenFavorites())}),e.TgZ(1,"mat-icon",12),e._uU(2,"favorite"),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("matBadge",t.badgeValue)}}function M(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.handleCloseFavorites())}),e.TgZ(1,"mat-icon",12),e._uU(2,"favorite"),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("matBadge",t.badgeValue)}}let T=(()=>{class n{constructor(t,o){this._router=t,this.genresService=o,this.badgeValue=0,this.onCloseSearch=new e.vpe,this.onOpenFavorites=new e.vpe,this.onCloseFavorite=new e.vpe}ngOnInit(){this.genresService.searchFilterOn=!1,this.form=new c.cw({search:new c.NI("")}),this._sub=this.form.controls.search.valueChanges.pipe((0,S.b)(500)).subscribe(t=>{this.genresService.searchValue.next(t)})}handleBack(){this._router.navigate([""])}handleOpenFavorites(){this.genresService.favoriteFilterOn=!0,this.onOpenFavorites.emit(),this.form.reset()}handleCloseFavorites(){this.genresService.favoriteFilterOn=!1,this.onCloseFavorite.emit(),this.form.reset()}handleOnSearch(){this.genresService.searchFilterOn=!0}handleCloseSearch(){this.onCloseSearch.emit(),this.genresService.searchValue.next(""),this.genresService.searchFilterOn=!1,this.form.reset()}ngOnDestroy(){this._sub.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m.F0),e.Y36(g.S))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-navigation"]],inputs:{badgeValue:"badgeValue"},outputs:{onCloseSearch:"onCloseSearch",onOpenFavorites:"onOpenFavorites",onCloseFavorite:"onCloseFavorite"},decls:16,vars:4,consts:[[1,"Header"],[1,"LeftSide"],["mat-icon-button","",1,"BackButton",3,"click"],[1,"test",3,"formGroup"],["appearance","outline",1,"Search",3,"click"],["matInput","","formControlName","search"],["mat-icon-button","",3,"click",4,"ngIf"],[1,"Spacer"],["mat-icon-button","","color","secondary","class","Favorite",3,"click",4,"ngIf"],["mat-icon-button","","color","accent","class","Favorite",3,"click",4,"ngIf"],["mat-icon-button","",3,"click"],["mat-icon-button","","color","secondary",1,"Favorite",3,"click"],["matBadgeColor","warn",3,"matBadge"],["mat-icon-button","","color","accent",1,"Favorite",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"mat-toolbar",0)(1,"div",1)(2,"button",2),e.NdJ("click",function(){return o.handleBack()}),e.TgZ(3,"mat-icon"),e._uU(4,"arrow_back"),e.qZA(),e.TgZ(5,"span"),e._uU(6,"Back"),e.qZA()(),e.TgZ(7,"form",3)(8,"mat-form-field",4),e.NdJ("click",function(){return o.handleOnSearch()}),e.TgZ(9,"mat-label"),e._uU(10,"Search"),e.qZA(),e._UZ(11,"input",5),e.qZA()(),e.YNc(12,F,3,0,"button",6),e.qZA(),e._UZ(13,"span",7),e.YNc(14,P,3,1,"button",8),e.YNc(15,M,3,1,"button",9),e.qZA()),2&t&&(e.xp6(7),e.Q6J("formGroup",o.form),e.xp6(5),e.Q6J("ngIf",o.genresService.searchFilterOn),e.xp6(2),e.Q6J("ngIf",!o.genresService.favoriteFilterOn),e.xp6(1),e.Q6J("ngIf",o.genresService.favoriteFilterOn))},dependencies:[l.O5,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,v.lW,f.Hw,O.Ye,x.k,_.KE,_.hX,A.Nt],styles:[".Spacer[_ngcontent-%COMP%]{flex:1 1 auto}.LeftSide[_ngcontent-%COMP%]{display:flex;align-items:center;height:100%}.LeftSide[_ngcontent-%COMP%]   .BackButton[_ngcontent-%COMP%]{display:flex;align-items:center;width:auto;margin-right:24px}.LeftSide[_ngcontent-%COMP%]   .BackButton[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}.LeftSide[_ngcontent-%COMP%]   .Search[_ngcontent-%COMP%]{display:flex}.LeftSide[_ngcontent-%COMP%]   .Search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(last-item){margin-right:8px}.LeftSide[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{height:60%;font-size:14px}.LeftSide[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]     .mat-form-field-flex>.mat-form-field-infix{padding:.4em 0!important}.LeftSide[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]     .mat-form-field-label-wrapper{top:-1.5em}.LeftSide[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]     .mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{transform:translateY(-1.1em) scale(.75);width:133.33333%}"]}),n})();function I(n,i){if(1&n&&(e.TgZ(0,"p",11),e._uU(1),e.qZA()),2&n){const t=e.oxw(2).$implicit;e.xp6(1),e.Oqu(t.artist.name)}}function y(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"button",12),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2).$implicit,s=e.oxw();return e.KtG(s.handleAddToFavorite(r,s.activeGenre))}),e.TgZ(1,"mat-icon"),e._uU(2,"favorite_outline"),e.qZA()()}}function w(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2).$implicit,s=e.oxw();return e.KtG(s.handleRemoveFromFavorite(r,s.activeGenre))}),e.TgZ(1,"mat-icon"),e._uU(2,"favorite"),e.qZA()()}}function G(n,i){if(1&n&&(e.TgZ(0,"div",5),e.YNc(1,I,2,1,"p",6),e.TgZ(2,"p",7),e._uU(3),e.qZA(),e.TgZ(4,"a",8),e._uU(5,"Go to song"),e.qZA(),e.YNc(6,y,3,0,"button",9),e.YNc(7,w,3,0,"button",10),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",t.artist),e.xp6(2),e.Oqu(t.name),e.xp6(1),e.Q6J("href",t.url,e.LSH),e.xp6(2),e.Q6J("ngIf",!t.isFavorite),e.xp6(1),e.Q6J("ngIf",t.isFavorite)}}const Z=function(n){return{hover:n}};function N(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",3),e.NdJ("mouseover",function(){const s=e.CHM(t).$implicit,u=e.oxw();return e.KtG(u.hoverElement=s)})("mouseleave",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.hoverElement=null)}),e.YNc(1,G,8,5,"div",4),e.qZA()}if(2&n){const t=i.$implicit,o=e.oxw();e.Q6J("ngStyle",o.imgStyles(t))("ngClass",e.VKq(3,Z,o.hoverElement===t)),e.xp6(1),e.Q6J("ngIf",o.hoverElement===t)}}let b=(()=>{class n{constructor(t){this.genresService=t}imgStyles(t){return{"background-image":`${this.getAlbumImg(t)}`,"background-color":"#000","background-repeat":"no-repeat","background-position":"center","background-size":"cover"}}getAlbumImg(t){return`url(${t.image[3]["#text"]})`}handleAddToFavorite(t,o){this.genresService.handleAddToFavorite(o,t)}handleRemoveFromFavorite(t,o){this.genresService.handleRemoveFromFavorite(o,t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(g.S))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-album"]],inputs:{albumsToShow:"albumsToShow",activeGenre:"activeGenre"},decls:3,vars:1,consts:[[1,"Wrapper"],[1,"Albums"],["class","Albums-Album",3,"ngStyle","ngClass","mouseover","mouseleave",4,"ngFor","ngForOf"],[1,"Albums-Album",3,"ngStyle","ngClass","mouseover","mouseleave"],["class","Content",4,"ngIf"],[1,"Content"],["class","Info Info-Singer",4,"ngIf"],[1,"Info","Info-Name"],["target","_blank",1,"Info","Info-Link",3,"href"],["mat-icon-button","","aria-label","Add to favorites",3,"click",4,"ngIf"],["mat-icon-button","","aria-label","Remove from favorites",3,"click",4,"ngIf"],[1,"Info","Info-Singer"],["mat-icon-button","","aria-label","Add to favorites",3,"click"],["mat-icon-button","","aria-label","Remove from favorites",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"section",0)(1,"div",1),e.YNc(2,N,2,5,"div",2),e.qZA()()),2&t&&(e.xp6(2),e.Q6J("ngForOf",o.albumsToShow))},dependencies:[l.mk,l.sg,l.O5,l.PC,v.lW,f.Hw],styles:[".Wrapper[_ngcontent-%COMP%]{height:100%;overflow-y:scroll!important;padding-bottom:24px}.Wrapper[_ngcontent-%COMP%]   .Albums_empty[_ngcontent-%COMP%]{font-family:Roboto;font-size:16px;font-weight:400;width:100%;margin:48px 24px}.Wrapper[_ngcontent-%COMP%]   .Albums[_ngcontent-%COMP%]{scroll-behavior:smooth;display:grid;padding:48px;grid-template-columns:repeat(5,1fr);gap:24px}@media screen and (max-width: 1200px){.Wrapper[_ngcontent-%COMP%]   .Albums[_ngcontent-%COMP%]{padding:48px 24px;grid-template-columns:repeat(3,1fr)}}@media screen and (max-width: 500px){.Wrapper[_ngcontent-%COMP%]   .Albums[_ngcontent-%COMP%]{grid-template-columns:repeat(1,1fr)}}.Wrapper[_ngcontent-%COMP%]   .Albums-Album[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;border-radius:8px;overflow:hidden;width:100%;aspect-ratio:1/1}.Wrapper[_ngcontent-%COMP%]   .Albums-Album[_ngcontent-%COMP%]   .Content[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}.Wrapper[_ngcontent-%COMP%]   .Albums-Album[_ngcontent-%COMP%]   .Content[_ngcontent-%COMP%]   .Info[_ngcontent-%COMP%]{text-align:center;margin:8px}.Wrapper[_ngcontent-%COMP%]   .Albums-Album[_ngcontent-%COMP%]   .Content[_ngcontent-%COMP%]   .Info-Singer[_ngcontent-%COMP%]{font-family:Roboto;font-size:24px;font-weight:700}@media screen and (max-width: 1200px){.Wrapper[_ngcontent-%COMP%]   .Albums-Album[_ngcontent-%COMP%]   .Content[_ngcontent-%COMP%]   .Info-Singer[_ngcontent-%COMP%]{font-family:Roboto;font-size:16px;font-weight:400;font-weight:700}}.Wrapper[_ngcontent-%COMP%]   .Albums-Album[_ngcontent-%COMP%]   .Content[_ngcontent-%COMP%]   .Info-Name[_ngcontent-%COMP%], .Wrapper[_ngcontent-%COMP%]   .Albums-Album[_ngcontent-%COMP%]   .Content[_ngcontent-%COMP%]   .Info-Link[_ngcontent-%COMP%]{font-family:Roboto;font-size:16px;font-weight:400;font-weight:700}@media screen and (max-width: 1200px){.Wrapper[_ngcontent-%COMP%]   .Albums-Album[_ngcontent-%COMP%]   .Content[_ngcontent-%COMP%]   .Info-Name[_ngcontent-%COMP%], .Wrapper[_ngcontent-%COMP%]   .Albums-Album[_ngcontent-%COMP%]   .Content[_ngcontent-%COMP%]   .Info-Link[_ngcontent-%COMP%]{font-family:Roboto;font-size:12px;font-weight:400}}.Wrapper[_ngcontent-%COMP%]   .Albums-Album[_ngcontent-%COMP%]   .Content[_ngcontent-%COMP%]   .Info-Link[_ngcontent-%COMP%]{margin-bottom:24px;text-decoration:underline;color:#e91e63;cursor:pointer}@media screen and (max-width: 1200px){.Wrapper[_ngcontent-%COMP%]   .Albums-Album[_ngcontent-%COMP%]   .Content[_ngcontent-%COMP%]   .Info-Link[_ngcontent-%COMP%]{margin-bottom:8px}}.Wrapper[_ngcontent-%COMP%]   .Albums-Album.hover[_ngcontent-%COMP%]{background-image:none!important;background-color:#111;border:1px solid #fff}"]}),n})();function k(n,i){1&n&&(e.TgZ(0,"p",7),e._uU(1," There aren't any albums with such name "),e.qZA())}function J(n,i){if(1&n&&e._UZ(0,"app-album",8),2&n){const t=e.oxw(2);e.Q6J("albumsToShow",t.albumsToShow)("activeGenre",t.genresService.activeGenre)}}function B(n,i){if(1&n&&(e.TgZ(0,"section",3),e._UZ(1,"router-outlet",null,4),e.YNc(3,k,2,0,"p",5),e.YNc(4,J,1,2,"app-album",6),e.qZA()),2&n){const t=e.oxw();e.xp6(3),e.Q6J("ngIf",t.noAlbums&&!t.genresService.favoriteFilterOn),e.xp6(1),e.Q6J("ngIf",!t.genresService.favoriteFilterOn&&!t.noAlbums)}}function V(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"mat-paginator",9),e.NdJ("page",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.handlePageEvent(r))}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("length",t.currentItems)("pageIndex",t.pageIndex-1)("hidePageSize",!0)}}let L=(()=>{class n{constructor(t,o,r){this.genresService=t,this._route=o,this._router=r,this.currentItems=0,this.allItems=0,this.pageIndex=1,this.noAlbums=!1}ngOnInit(){this.noAlbums=!1,this._sub=this._route.params.subscribe(t=>{this.genresService.activeGenre=t.genre}),this._sub.add(this._route.queryParams.subscribe(t=>{this.pageIndex=t.page,this._initialization(this.genresService.activeGenre,this.pageIndex)})),this._sub.add(this.genresService.albumsToShowByGenre.subscribe(t=>{this.albumsToShow=t,this.genresService.isLoaded.next(!0)})),this._sub.add(this.genresService.searchValue.subscribe(t=>{this.handleOnSearch(t)}))}handleOpenFavorites(){this.genresService.searchFilterOn&&(this.pageIndex=1,this.genresService.searchFilterOn=!1),this._router.navigate(["./favorites"],{relativeTo:this._route})}handleCloseFavorites(){this._router.navigate(["./"],{relativeTo:this._route,queryParams:{page:this.pageIndex}}),this._initialization(this.genresService.activeGenre,this.pageIndex),this.genresService.searchFilterOn=!1}_checkIsFavortite(t){const o=[];t.forEach(r=>{this.genresService.favoriteAlbumsByGenre.getValue().find(u=>r.name===u.name&&r.artist.name===u.artist.name)?o.push({...r,isFavorite:!0}):o.push(r)}),this.genresService.albumsToShowByGenre.next(o)}_initialization(t,o){const r=this.genresService.getFavoriteAlbums(this.genresService.activeGenre);this.genresService.favoriteAlbumsByGenre.next(r),this.albums=this.genresService.fetchAlbums(t,o).pipe((0,h.U)(s=>(this._checkIsFavortite(s),this.genresService.albumsToShowByGenre.getValue()))),this.albums.subscribe(s=>{this.currentItems=+this.genresService.albumsInfo.getValue().perPage,this.currentItems=+this.genresService.albumsInfo.getValue().total,this.genresService.albumsToShowByGenre.next(s)})}handleOnSearch(t){this.pageIndex=1,this.genresService.favoriteFilterOn?this._searchLogicInFavorites(t):this._searchLogic(t)}_searchLogicInFavorites(t){this.genresService.searchInFavorite(t,this.genresService.favoriteAlbumsByGenre.getValue())}_searchLogic(t){this.albums=this.genresService.searchAlbums(this.genresService.activeGenre,t,this.pageIndex).pipe((0,h.U)(o=>o?(this._checkIsFavortite(o),this.genresService.albumsToShowByGenre.getValue()):[])),t?this.albums.subscribe(o=>{this.currentItems=+this.genresService.albumsInfo.getValue().perPage,this.currentItems=+this.genresService.albumsInfo.getValue().total,this.genresService.albumsToShowByGenre.next(o),o&&(this.albumsToShow=o,this.noAlbums=0===this.albumsToShow.length)}):this._initialization(this.genresService.activeGenre,1)}handleOnCloseSearch(){this.genresService.searchFilterOn=!1,this.pageIndex=1,this.noAlbums=!1,this.genresService.favoriteFilterOn?this.genresService.searchInFavorite(this.genresService.searchValue.getValue(),this.genresService.getFavoriteAlbums(this.genresService.activeGenre)):this._router.navigate([],{queryParams:{page:this.pageIndex}})}handlePageEvent(t){const o=t.pageIndex+1;this.pageIndex=o,this.genresService.searchFilterOn?this._searchLogic(this.genresService.searchValue.getValue()):this._router.navigate([],{queryParams:{page:o}})}ngOnDestroy(){this.genresService.isLoaded.next(!1),this._sub.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(g.S),e.Y36(m.gz),e.Y36(m.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-genre-page"]],decls:4,vars:3,consts:[[3,"badgeValue","onCloseSearch","onOpenFavorites","onCloseFavorite"],["class","Albums",4,"ngIf"],["showPageSizeOptions","true","aria-label","Select page",3,"length","pageIndex","hidePageSize","page",4,"ngIf"],[1,"Albums"],["router",""],["class","Albums_empty",4,"ngIf"],[3,"albumsToShow","activeGenre",4,"ngIf"],[1,"Albums_empty"],[3,"albumsToShow","activeGenre"],["showPageSizeOptions","true","aria-label","Select page",3,"length","pageIndex","hidePageSize","page"]],template:function(t,o){1&t&&(e.TgZ(0,"section")(1,"app-navigation",0),e.NdJ("onCloseSearch",function(){return o.handleOnCloseSearch()})("onOpenFavorites",function(){return o.handleOpenFavorites()})("onCloseFavorite",function(){return o.handleCloseFavorites()}),e.qZA(),e.YNc(2,B,5,2,"section",1),e.YNc(3,V,1,3,"mat-paginator",2),e.qZA()),2&t&&(e.xp6(1),e.Q6J("badgeValue",o.genresService.favoriteAlbumsByGenre.getValue().length),e.xp6(1),e.Q6J("ngIf",o.genresService.isLoaded.getValue()),e.xp6(1),e.Q6J("ngIf",o.genresService.isLoaded.getValue()&&!o.genresService.favoriteFilterOn))},dependencies:[l.O5,C.NW,m.lC,T,b],styles:["section[_ngcontent-%COMP%]{height:100vh;display:flex;flex-direction:column}section[_ngcontent-%COMP%]   .Albums[_ngcontent-%COMP%]{height:100%;overflow-y:scroll!important}section[_ngcontent-%COMP%]   .Albums[_ngcontent-%COMP%]   .Albums_empty[_ngcontent-%COMP%]{font-family:Roboto;font-size:16px;font-weight:400;width:100%;margin:48px 24px}"]}),n})();function Y(n,i){1&n&&(e.TgZ(0,"p",2),e._uU(1,"There aren't any favorite albums"),e.qZA())}function Q(n,i){1&n&&(e.TgZ(0,"p",2),e._uU(1,"There aren't any favorite albums with such name"),e.qZA())}let U=(()=>{class n{constructor(t){this.genresService=t,this.noFavAlbums=!1,this.noFavAlbumsBySearch=!1}ngOnInit(){this.genresService.favoriteFilterOn=!0,this.favoriteAlbums=this.genresService.getFavoriteAlbums(this.genresService.activeGenre),0===this.favoriteAlbums.length&&!this.noFavAlbumsBySearch&&(this.noFavAlbums=!0),this.noFavAlbumsBySearch=!1,this._sub=this.genresService.favoriteAlbumsByGenre.subscribe(t=>{this.noFavAlbums=0===t.length&&!this.genresService.searchFilterOn,this.favoriteAlbums=t,this.genresService.searchInFavorite(this.genresService.searchValue.getValue(),t)}),this._sub.add(this.genresService.favoriteAlbumsBySearch.subscribe(t=>{this.genresService.searchFilterOn?(this.favoriteAlbums=t,this.noFavAlbumsBySearch=0===this.favoriteAlbums.length&&!1===this.noFavAlbums):this.noFavAlbumsBySearch=!1}))}ngOnDestroy(){this.genresService.favoriteFilterOn=!1,this._sub.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(g.S))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-favorites"]],decls:3,vars:4,consts:[["class","Albums_empty",4,"ngIf"],[3,"albumsToShow","activeGenre"],[1,"Albums_empty"]],template:function(t,o){1&t&&(e.YNc(0,Y,2,0,"p",0),e.YNc(1,Q,2,0,"p",0),e._UZ(2,"app-album",1)),2&t&&(e.Q6J("ngIf",o.noFavAlbums),e.xp6(1),e.Q6J("ngIf",o.noFavAlbumsBySearch),e.xp6(1),e.Q6J("albumsToShow",o.favoriteAlbums)("activeGenre",o.genresService.activeGenre))},dependencies:[l.O5,b],styles:[".Albums_empty[_ngcontent-%COMP%]{font-family:Roboto;font-size:16px;font-weight:400;width:100%;margin:48px 24px}"]}),n})(),W=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[l.ez,c.UX,d.q,m.Bz.forChild([{path:"",component:L,children:[{path:"favorites",component:U}]}])]}),n})()}}]);