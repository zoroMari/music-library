"use strict";(self.webpackChunkmusic_library=self.webpackChunkmusic_library||[]).push([[839],{839:(Q,p,s)=>{s.r(p),s.d(p,{GenreModule:()=>z});var c=s(6895),u=s(4006),l=s(3456),h=s(5183),d=s(7579),b=s(4004),e=s(4650),g=s(8270),C=s(9506),O=s(8372),f=s(4859),v=s(7392),x=s(3683),P=s(2673);function A(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"button",6),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.handleOpenFavorites())}),e.TgZ(1,"mat-icon",7),e._uU(2,"favorite"),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("matBadge",t.badgeValue)}}function S(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"button",8),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.handleCloseFavorites())}),e.TgZ(1,"mat-icon",7),e._uU(2,"favorite"),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("matBadge",t.badgeValue)}}let M=(()=>{class n{constructor(t){this._router=t,this.favoriteisOpen=!1,this.badgeValue=0,this.onSearch=new e.vpe,this.onOpenFavorites=new e.vpe,this.onCloseFavorite=new e.vpe}ngOnInit(){this.form=new u.cw({search:new u.NI("")}),this._sub=this.form.controls.search.valueChanges.pipe((0,O.b)(200)).subscribe(t=>{this.onSearch.emit(t)})}handleBack(){this._router.navigate([""])}handleOpenFavorites(){this.favoriteisOpen=!0,this.onOpenFavorites.emit(!0),this.form.reset()}handleCloseFavorites(){this.favoriteisOpen=!1,this.onCloseFavorite.emit(!1),this.form.reset()}ngOnDestroy(){this._sub.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(l.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-navigation"]],inputs:{badgeValue:"badgeValue"},outputs:{onSearch:"onSearch",onOpenFavorites:"onOpenFavorites",onCloseFavorite:"onCloseFavorite"},decls:10,vars:2,consts:[[1,"Header"],[1,"LeftSide"],["mat-icon-button","",1,"BackButton",3,"click"],[1,"Spacer"],["mat-icon-button","","color","secondary","class","Favorite",3,"click",4,"ngIf"],["mat-icon-button","","color","accent","class","Favorite",3,"click",4,"ngIf"],["mat-icon-button","","color","secondary",1,"Favorite",3,"click"],["matBadgeColor","warn",3,"matBadge"],["mat-icon-button","","color","accent",1,"Favorite",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"mat-toolbar",0)(1,"div",1)(2,"button",2),e.NdJ("click",function(){return o.handleBack()}),e.TgZ(3,"mat-icon"),e._uU(4,"arrow_back"),e.qZA(),e.TgZ(5,"span"),e._uU(6,"Back"),e.qZA()()(),e._UZ(7,"span",3),e.YNc(8,A,3,1,"button",4),e.YNc(9,S,3,1,"button",5),e.qZA()),2&t&&(e.xp6(8),e.Q6J("ngIf",!o.favoriteisOpen),e.xp6(1),e.Q6J("ngIf",o.favoriteisOpen))},dependencies:[c.O5,f.lW,v.Hw,x.Ye,P.k],styles:[".Spacer[_ngcontent-%COMP%]{flex:1 1 auto}.LeftSide[_ngcontent-%COMP%]{display:flex;align-items:center;height:100%}.LeftSide[_ngcontent-%COMP%]   .BackButton[_ngcontent-%COMP%]{display:flex;align-items:center;width:auto;margin-right:24px}.LeftSide[_ngcontent-%COMP%]   .BackButton[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}.LeftSide[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{height:60%;font-size:14px}.LeftSide[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]     .mat-form-field-flex>.mat-form-field-infix{padding:.4em 0!important}.LeftSide[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]     .mat-form-field-label-wrapper{top:-1.5em}.LeftSide[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]     .mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{transform:translateY(-1.1em) scale(.75);width:133.33333%}"]}),n})();function F(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"button",11),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).$implicit,r=e.oxw();return e.KtG(r.handleAddToFavorite(a,r.activeGenre))}),e.TgZ(1,"mat-icon"),e._uU(2,"favorite_outline"),e.qZA()()}}function T(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"button",12),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).$implicit,r=e.oxw();return e.KtG(r.handleRemoveFromFavorite(a,r.activeGenre))}),e.TgZ(1,"mat-icon"),e._uU(2,"favorite"),e.qZA()()}}function y(n,i){if(1&n&&(e.TgZ(0,"div",5)(1,"p",6),e._uU(2),e.qZA(),e.TgZ(3,"p",7),e._uU(4),e.qZA(),e.TgZ(5,"a",8),e._uU(6,"Go to song"),e.qZA(),e.YNc(7,F,3,0,"button",9),e.YNc(8,T,3,0,"button",10),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.artist.name),e.xp6(2),e.Oqu(t.name),e.xp6(1),e.Q6J("href",t.url,e.LSH),e.xp6(2),e.Q6J("ngIf",!t.isFavorite),e.xp6(1),e.Q6J("ngIf",t.isFavorite)}}const I=function(n){return{hover:n}};function w(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",3),e.NdJ("mouseover",function(){const r=e.CHM(t).$implicit,m=e.oxw();return e.KtG(m.hoverElement=r)})("mouseleave",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.hoverElement=null)}),e.YNc(1,y,9,5,"div",4),e.qZA()}if(2&n){const t=i.$implicit,o=e.oxw();e.Q6J("ngStyle",o.imgStyles(t))("ngClass",e.VKq(3,I,o.hoverElement===t)),e.xp6(1),e.Q6J("ngIf",o.hoverElement===t)}}let _=(()=>{class n{constructor(t){this.genresService=t}imgStyles(t){return{"background-image":`${this.getAlbumImg(t)}`,"background-color":"#000","background-repeat":"no-repeat","background-position":"center","background-size":"cover"}}getAlbumImg(t){return`url(${t.image[3]["#text"]})`}handleAddToFavorite(t,o){this.genresService.handleAddToFavorite(o,t)}handleRemoveFromFavorite(t,o){this.genresService.handleRemoveFromFavorite(o,t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(g.S))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-album"]],inputs:{albumsToShow:"albumsToShow",activeGenre:"activeGenre"},decls:3,vars:1,consts:[[1,"Wrapper"],[1,"Albums"],["class","Albums-Album",3,"ngStyle","ngClass","mouseover","mouseleave",4,"ngFor","ngForOf"],[1,"Albums-Album",3,"ngStyle","ngClass","mouseover","mouseleave"],["class","Content",4,"ngIf"],[1,"Content"],[1,"Info","Info-Singer"],[1,"Info","Info-Name"],["target","_blank",1,"Info","Info-Link",3,"href"],["mat-icon-button","","aria-label","Add to favorites",3,"click",4,"ngIf"],["mat-icon-button","","aria-label","Remove from favorites",3,"click",4,"ngIf"],["mat-icon-button","","aria-label","Add to favorites",3,"click"],["mat-icon-button","","aria-label","Remove from favorites",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"section",0)(1,"div",1),e.YNc(2,w,2,5,"div",2),e.qZA()()),2&t&&(e.xp6(2),e.Q6J("ngForOf",o.albumsToShow))},dependencies:[c.mk,c.sg,c.O5,c.PC,f.lW,v.Hw],styles:[".Wrapper[_ngcontent-%COMP%]{height:100%;overflow-y:scroll!important;padding-bottom:24px}.Wrapper[_ngcontent-%COMP%]   .Albums_empty[_ngcontent-%COMP%]{font-family:Roboto;font-size:16px;font-weight:400;width:100%;margin:48px 24px}.Wrapper[_ngcontent-%COMP%]   .Albums[_ngcontent-%COMP%]{scroll-behavior:smooth;display:grid;padding:48px;grid-template-columns:repeat(5,1fr);gap:24px}@media screen and (max-width: 1200px){.Wrapper[_ngcontent-%COMP%]   .Albums[_ngcontent-%COMP%]{padding:48px 24px;grid-template-columns:repeat(3,1fr)}}@media screen and (max-width: 500px){.Wrapper[_ngcontent-%COMP%]   .Albums[_ngcontent-%COMP%]{grid-template-columns:repeat(1,1fr)}}.Wrapper[_ngcontent-%COMP%]   .Albums-Album[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;border-radius:8px;overflow:hidden;width:100%;aspect-ratio:1/1}.Wrapper[_ngcontent-%COMP%]   .Albums-Album[_ngcontent-%COMP%]   .Content[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}.Wrapper[_ngcontent-%COMP%]   .Albums-Album[_ngcontent-%COMP%]   .Content[_ngcontent-%COMP%]   .Info[_ngcontent-%COMP%]{text-align:center;margin:8px}.Wrapper[_ngcontent-%COMP%]   .Albums-Album[_ngcontent-%COMP%]   .Content[_ngcontent-%COMP%]   .Info-Singer[_ngcontent-%COMP%]{font-family:Roboto;font-size:24px;font-weight:700}@media screen and (max-width: 1200px){.Wrapper[_ngcontent-%COMP%]   .Albums-Album[_ngcontent-%COMP%]   .Content[_ngcontent-%COMP%]   .Info-Singer[_ngcontent-%COMP%]{font-family:Roboto;font-size:16px;font-weight:400;font-weight:700}}.Wrapper[_ngcontent-%COMP%]   .Albums-Album[_ngcontent-%COMP%]   .Content[_ngcontent-%COMP%]   .Info-Name[_ngcontent-%COMP%], .Wrapper[_ngcontent-%COMP%]   .Albums-Album[_ngcontent-%COMP%]   .Content[_ngcontent-%COMP%]   .Info-Link[_ngcontent-%COMP%]{font-family:Roboto;font-size:16px;font-weight:400;font-weight:700}@media screen and (max-width: 1200px){.Wrapper[_ngcontent-%COMP%]   .Albums-Album[_ngcontent-%COMP%]   .Content[_ngcontent-%COMP%]   .Info-Name[_ngcontent-%COMP%], .Wrapper[_ngcontent-%COMP%]   .Albums-Album[_ngcontent-%COMP%]   .Content[_ngcontent-%COMP%]   .Info-Link[_ngcontent-%COMP%]{font-family:Roboto;font-size:12px;font-weight:400}}.Wrapper[_ngcontent-%COMP%]   .Albums-Album[_ngcontent-%COMP%]   .Content[_ngcontent-%COMP%]   .Info-Link[_ngcontent-%COMP%]{margin-bottom:24px;text-decoration:underline;color:#e91e63;cursor:pointer}@media screen and (max-width: 1200px){.Wrapper[_ngcontent-%COMP%]   .Albums-Album[_ngcontent-%COMP%]   .Content[_ngcontent-%COMP%]   .Info-Link[_ngcontent-%COMP%]{margin-bottom:8px}}.Wrapper[_ngcontent-%COMP%]   .Albums-Album.hover[_ngcontent-%COMP%]{background-image:none!important;background-color:#111;border:1px solid #fff}"]}),n})();function G(n,i){1&n&&e._UZ(0,"router-outlet")}function Z(n,i){if(1&n&&e._UZ(0,"app-album",6,7),2&n){const t=e.oxw(2);e.Q6J("albumsToShow",t.albumsToShow)("activeGenre",t.genresService.activeGenre)}}function N(n,i){if(1&n&&(e.TgZ(0,"section",3),e.YNc(1,G,1,0,"router-outlet",4),e.YNc(2,Z,2,2,"app-album",5),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.genresService.favoriteFilterOn),e.xp6(1),e.Q6J("ngIf",!t.genresService.favoriteFilterOn)}}function k(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"mat-paginator",8,9),e.NdJ("page",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.handlePageEvent(a))}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("length",t.currentItems)("pageIndex",t.pageIndex-1)("hidePageSize",!0)}}let J=(()=>{class n{constructor(t,o,a){this.genresService=t,this._route=o,this._router=a,this._albumsFilteredChange=new d.x,this.currentItems=0,this.allItems=0,this.pageIndex=1,this._test="test",this.noAlbums=!1}ngOnInit(){this._sub=this._route.params.subscribe(t=>{this.genresService.activeGenre=t.genre}),this._sub.add(this._route.queryParams.subscribe(t=>{this.pageIndex=t.page,this._initialization(this.genresService.activeGenre,this.pageIndex)})),this._sub.add(this.genresService.albumsToShowByGenre.subscribe(t=>{this.albumsToShow=t,this.genresService.isLoaded.next(!0)})),this._sub.add(this._albumsFilteredChange.subscribe(t=>{this.albumsToShow=t}))}handleOnSearch(t){}handleOpenFavorites(t){this.genresService.favoriteFilterOn=t,this._router.navigate(["./favorites"],{relativeTo:this._route,queryParamsHandling:"preserve"})}handleCloseFavorites(t){this._router.navigate(["./"],{relativeTo:this._route,queryParamsHandling:"preserve"}),this._initialization(this.genresService.activeGenre,this.pageIndex),this.genresService.favoriteFilterOn=t}_checkIsFavortite(t){const o=[];t.forEach(a=>{this.genresService.favoriteAlbumsByGenre.getValue().find(m=>a.name===m.name&&a.artist.name===m.artist.name)?o.push({...a,isFavorite:!0}):o.push(a)}),this.genresService.albumsToShowByGenre.next(o)}_initialization(t,o){const a=this.genresService.getFavoriteAlbums(this.genresService.activeGenre);this.genresService.favoriteAlbumsByGenre.next(a),this.albums=this.genresService.fetchAlbums(t,o).pipe((0,b.U)(r=>(this._checkIsFavortite(r),this.genresService.albumsToShowByGenre.getValue()))),this.albums.subscribe(r=>{this.currentItems=+this.genresService.albumsInfo.getValue().perPage,this.currentItems=+this.genresService.albumsInfo.getValue().total,this.genresService.albumsToShowByGenre.next(r)})}handlePageEvent(t){const o=t.pageIndex+1;this.pageIndex=o,this._router.navigate([],{queryParams:{page:o}})}ngOnDestroy(){this.genresService.isLoaded.next(!1),this._sub.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(g.S),e.Y36(l.gz),e.Y36(l.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-genre-page"]],decls:4,vars:3,consts:[[3,"badgeValue","onSearch","onOpenFavorites","onCloseFavorite"],["class","Albums",4,"ngIf"],["showPageSizeOptions","true","aria-label","Select page",3,"length","pageIndex","hidePageSize","page",4,"ngIf"],[1,"Albums"],[4,"ngIf"],[3,"albumsToShow","activeGenre",4,"ngIf"],[3,"albumsToShow","activeGenre"],["album",""],["showPageSizeOptions","true","aria-label","Select page",3,"length","pageIndex","hidePageSize","page"],["paginator",""]],template:function(t,o){1&t&&(e.TgZ(0,"section")(1,"app-navigation",0),e.NdJ("onSearch",function(r){return o.handleOnSearch(r)})("onOpenFavorites",function(r){return o.handleOpenFavorites(r)})("onCloseFavorite",function(r){return o.handleCloseFavorites(r)}),e.qZA(),e.YNc(2,N,3,2,"section",1),e.YNc(3,k,2,3,"mat-paginator",2),e.qZA()),2&t&&(e.xp6(1),e.Q6J("badgeValue",o.genresService.favoriteAlbumsByGenre.getValue().length),e.xp6(1),e.Q6J("ngIf",o.genresService.isLoaded.getValue()),e.xp6(1),e.Q6J("ngIf",o.genresService.isLoaded.getValue()&&!o.genresService.favoriteFilterOn))},dependencies:[c.O5,C.NW,l.lC,M,_],styles:["section[_ngcontent-%COMP%]{height:100vh;display:flex;flex-direction:column}section[_ngcontent-%COMP%]   .Albums[_ngcontent-%COMP%]{height:100%;overflow-y:scroll!important}"]}),n})();function B(n,i){1&n&&(e.TgZ(0,"p",2),e._uU(1,"There aren't any favorite albums"),e.qZA())}let W=(()=>{class n{constructor(t){this.genresService=t,this.noFavAlbums=!1}ngOnInit(){this.favoriteAlbums=this.genresService.favoriteAlbumsByGenre.getValue(),0===this.favoriteAlbums.length&&(this.noFavAlbums=!0),this._sub=this.genresService.favoriteAlbumsByGenre.subscribe(t=>{this.noFavAlbums=0===t.length,this.favoriteAlbums=t})}ngOnDestroy(){this.genresService.favoriteFilterOn=!1,this._sub.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(g.S))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-favorites"]],decls:2,vars:3,consts:[["class","Albums_empty",4,"ngIf"],[3,"albumsToShow","activeGenre"],[1,"Albums_empty"]],template:function(t,o){1&t&&(e.YNc(0,B,2,0,"p",0),e._UZ(1,"app-album",1)),2&t&&(e.Q6J("ngIf",o.noFavAlbums),e.xp6(1),e.Q6J("albumsToShow",o.favoriteAlbums)("activeGenre",o.genresService.activeGenre))},dependencies:[c.O5,_],styles:[".Albums_empty[_ngcontent-%COMP%]{font-family:Roboto;font-size:16px;font-weight:400;width:100%;margin:48px 24px}"]}),n})(),z=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[c.ez,u.UX,h.q,l.Bz.forChild([{path:"",component:J,children:[{path:"favorites",component:W}]}])]}),n})()}}]);