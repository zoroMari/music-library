"use strict";(self.webpackChunkmusic_library=self.webpackChunkmusic_library||[]).push([[997],{3997:(L,u,a)=>{a.r(u),a.d(u,{GenreModule:()=>J});var c=a(6895),l=a(4006),m=a(3321),v=a(2958),_=a(7579),b=a(4004),e=a(4650),C=a(8270),g=a(4859),p=a(7392),O=a(4999),A=a(3683),P=a(2673),f=a(3916),x=a(4144);function M(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",9),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.handleOpenFavorites())}),e.TgZ(1,"mat-icon",10),e._uU(2,"favorite"),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("matBadge",t.badgeValue)}}function F(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",11),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.handleCloseFavorites())}),e.TgZ(1,"mat-icon",10),e._uU(2,"favorite"),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("matBadge",t.badgeValue)}}let T=(()=>{class n{constructor(t,o){this._router=t,this._route=o,this.favoriteisOpen=!1,this.badgeValue=0,this.onSearch=new e.vpe,this.onOpenFavorites=new e.vpe,this.onCloseFavorite=new e.vpe}ngOnInit(){this.form=new l.cw({search:new l.NI("")}),this._sub=this.form.controls.search.valueChanges.pipe((0,O.b)(200)).subscribe(t=>{this.onSearch.emit(t)})}handleBack(){this._router.navigate(["../"],{relativeTo:this._route})}handleOpenFavorites(){this.favoriteisOpen=!0,this.onOpenFavorites.emit(),this.form.reset()}handleCloseFavorites(){this.favoriteisOpen=!1,this.onCloseFavorite.emit(),this.form.reset()}ngOnDestroy(){this._sub.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m.F0),e.Y36(m.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-navigation"]],inputs:{badgeValue:"badgeValue"},outputs:{onSearch:"onSearch",onOpenFavorites:"onOpenFavorites",onCloseFavorite:"onCloseFavorite"},decls:15,vars:3,consts:[[1,"Header"],[1,"LeftSide"],["mat-icon-button","",1,"BackButton",3,"click"],[1,"test",3,"formGroup"],["appearance","outline",1,"Search"],["matInput","","formControlName","search"],[1,"Spacer"],["mat-icon-button","","color","secondary","class","Favorite",3,"click",4,"ngIf"],["mat-icon-button","","color","accent","class","Favorite",3,"click",4,"ngIf"],["mat-icon-button","","color","secondary",1,"Favorite",3,"click"],["matBadgeColor","warn",3,"matBadge"],["mat-icon-button","","color","accent",1,"Favorite",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"mat-toolbar",0)(1,"div",1)(2,"button",2),e.NdJ("click",function(){return o.handleBack()}),e.TgZ(3,"mat-icon"),e._uU(4,"arrow_back"),e.qZA(),e.TgZ(5,"span"),e._uU(6,"Back"),e.qZA()(),e.TgZ(7,"form",3)(8,"mat-form-field",4)(9,"mat-label"),e._uU(10,"Search"),e.qZA(),e._UZ(11,"input",5),e.qZA()()(),e._UZ(12,"span",6),e.YNc(13,M,3,1,"button",7),e.YNc(14,F,3,1,"button",8),e.qZA()),2&t&&(e.xp6(7),e.Q6J("formGroup",o.form),e.xp6(6),e.Q6J("ngIf",!o.favoriteisOpen),e.xp6(1),e.Q6J("ngIf",o.favoriteisOpen))},dependencies:[c.O5,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,g.lW,p.Hw,A.Ye,P.k,f.KE,f.hX,x.Nt],styles:[".Spacer[_ngcontent-%COMP%]{flex:1 1 auto}.LeftSide[_ngcontent-%COMP%]{display:flex;align-items:center;height:100%}.LeftSide[_ngcontent-%COMP%]   .BackButton[_ngcontent-%COMP%]{display:flex;align-items:center;width:auto;margin-right:24px}.LeftSide[_ngcontent-%COMP%]   .BackButton[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}.LeftSide[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{height:60%;font-size:14px}.LeftSide[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]     .mat-form-field-flex>.mat-form-field-infix{padding:.4em 0!important}.LeftSide[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]     .mat-form-field-label-wrapper{top:-1.5em}.LeftSide[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]     .mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{transform:translateY(-1.1em) scale(.75);width:133.33333%}"]}),n})();function w(n,r){1&n&&(e.TgZ(0,"p",5),e._uU(1,"There isn't any albums with such name"),e.qZA())}function S(n,r){1&n&&(e.TgZ(0,"p",5),e._uU(1,"There isn't any favorite albums"),e.qZA())}function Z(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2).$implicit,s=e.oxw();return e.KtG(s.handleAddToFavorite(i))}),e.TgZ(1,"mat-icon"),e._uU(2,"favorite_outline"),e.qZA()()}}function y(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",15),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2).$implicit,s=e.oxw();return e.KtG(s.handleRemoveFromFavorite(i))}),e.TgZ(1,"mat-icon"),e._uU(2,"favorite"),e.qZA()()}}function G(n,r){if(1&n&&(e.TgZ(0,"div",8)(1,"p",9),e._uU(2),e.qZA(),e.TgZ(3,"p",10),e._uU(4),e.qZA(),e.TgZ(5,"a",11),e._uU(6,"Go to song"),e.qZA(),e.YNc(7,Z,3,0,"button",12),e.YNc(8,y,3,0,"button",13),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.artist.name),e.xp6(2),e.Oqu(t.name),e.xp6(1),e.Q6J("href",t.url,e.LSH),e.xp6(2),e.Q6J("ngIf",!t.isFavorite),e.xp6(1),e.Q6J("ngIf",t.isFavorite)}}const I=function(n){return{hover:n}};function N(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",6),e.NdJ("mouseover",function(){const s=e.CHM(t).$implicit,h=e.oxw();return e.KtG(h.hoverElement=s)})("mouseleave",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.hoverElement=null)}),e.YNc(1,G,9,5,"div",7),e.qZA()}if(2&n){const t=r.$implicit,o=e.oxw();e.Q6J("ngStyle",o.imgStyles(t))("ngClass",e.VKq(3,I,o.hoverElement===t)),e.xp6(1),e.Q6J("ngIf",o.hoverElement===t)}}let k=(()=>{class n{constructor(t,o){this.genresService=t,this._route=o,this.activeGenre="",this.albumsToShow=[],this.albumsAll=[],this.favoriteAlbums=[],this.noAlbums=!1,this.noFavAlbums=!1,this.favoriteFilterOn=!1,this._albumsFilteredChange=new _.x}ngOnInit(){0===this.favoriteAlbums.length&&(this.noFavAlbums=!0),this._sub=this._route.params.subscribe(t=>{this.activeGenre=t.genre,this.favoriteAlbums=this.genresService.getFavoriteAlbums(this.activeGenre),this.favoriteAlbums.length>0&&(this.noFavAlbums=!1),this.albums=this.genresService.fetchAlbums(t.genre).pipe((0,b.U)(o=>{const i=[];return o.forEach(s=>{this.favoriteAlbums.find(d=>s.name===d.name&&s.artist.name===d.artist.name)?i.push({...s,isFavorite:!0}):i.push(s)}),i})),this.albums.subscribe(o=>{this.albumsAll=o,this.albumsToShow=o})}),this._sub.add(this._albumsFilteredChange.subscribe(t=>{this.albumsToShow=t})),this._sub.add(this.genresService.favoriteAlbumsByGenreChanged.subscribe(t=>{this.noFavAlbums=0===t.length,this.favoriteAlbums=t}))}imgStyles(t){return{"background-image":`${this.getAlbumImg(t)}`,"background-repeat":"no-repeat","background-position":"center","background-size":"cover"}}getAlbumImg(t){return`url(${t.image[3]["#text"]})`}handleOnSearch(t){let o=[];o=this.favoriteFilterOn?this.favoriteAlbums.filter(i=>i.name.toLowerCase().includes(t.toLowerCase())||i.artist.name.toLowerCase().includes(t.toLowerCase())):this.albumsAll.filter(i=>i.name.toLowerCase().includes(t.toLowerCase())||i.artist.name.toLowerCase().includes(t.toLowerCase())),this.noAlbums=0===o.length,this._albumsFilteredChange.next(o)}handleAddToFavorite(t){this.genresService.handleAddToFavorite(this.activeGenre,t)}handleRemoveFromFavorite(t){this.genresService.handleRemoveFromFavorite(this.activeGenre,t),this.favoriteFilterOn&&this._albumsFilteredChange.next(this.favoriteAlbums)}handleOpenFavorites(){this.favoriteFilterOn=!0;const t=this.albumsAll.filter(o=>!0===o.isFavorite);this._albumsFilteredChange.next(t)}handleCloseFavorites(){this.favoriteFilterOn=!1,this._albumsFilteredChange.next(this.albumsAll)}ngOnDestroy(){this._sub.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(C.S),e.Y36(m.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-genre-page"]],decls:6,vars:4,consts:[[3,"badgeValue","onSearch","onOpenFavorites","onCloseFavorite"],[1,"Wrapper"],["class","Albums_empty",4,"ngIf"],[1,"Albums"],["class","Albums-Album",3,"ngStyle","ngClass","mouseover","mouseleave",4,"ngFor","ngForOf"],[1,"Albums_empty"],[1,"Albums-Album",3,"ngStyle","ngClass","mouseover","mouseleave"],["class","Content",4,"ngIf"],[1,"Content"],[1,"Info","Info-Singer"],[1,"Info","Info-Name"],["target","_blank",1,"Info","Info-Link",3,"href"],["mat-icon-button","","aria-label","Add to favorites",3,"click",4,"ngIf"],["mat-icon-button","","aria-label","Remove from favorites",3,"click",4,"ngIf"],["mat-icon-button","","aria-label","Add to favorites",3,"click"],["mat-icon-button","","aria-label","Remove from favorites",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"app-navigation",0),e.NdJ("onSearch",function(s){return o.handleOnSearch(s)})("onOpenFavorites",function(){return o.handleOpenFavorites()})("onCloseFavorite",function(){return o.handleCloseFavorites()}),e.qZA(),e.TgZ(1,"section",1),e.YNc(2,w,2,0,"p",2),e.YNc(3,S,2,0,"p",2),e.TgZ(4,"div",3),e.YNc(5,N,2,5,"div",4),e.qZA()()),2&t&&(e.Q6J("badgeValue",o.favoriteAlbums.length),e.xp6(2),e.Q6J("ngIf",o.noAlbums),e.xp6(1),e.Q6J("ngIf",o.noFavAlbums&&o.favoriteFilterOn),e.xp6(2),e.Q6J("ngForOf",o.albumsToShow))},dependencies:[c.mk,c.sg,c.O5,c.PC,g.lW,p.Hw,T],styles:[".Wrapper[_ngcontent-%COMP%]{height:100vh;overflow-y:scroll!important}.Wrapper[_ngcontent-%COMP%]   .Albums_empty[_ngcontent-%COMP%]{font-family:Roboto;font-size:16px;font-weight:400;width:100%;margin:48px 24px}.Wrapper[_ngcontent-%COMP%]   .Albums[_ngcontent-%COMP%]{scroll-behavior:smooth;display:grid;padding:48px;grid-template-columns:repeat(5,1fr);gap:24px}@media screen and (max-width: 1200px){.Wrapper[_ngcontent-%COMP%]   .Albums[_ngcontent-%COMP%]{padding:48px 24px}}@media screen and (max-width: 500px){.Wrapper[_ngcontent-%COMP%]   .Albums[_ngcontent-%COMP%]{grid-template-columns:repeat(1,1fr)}}.Wrapper[_ngcontent-%COMP%]   .Albums-Album[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;border-radius:8px;overflow:hidden;width:100%;aspect-ratio:1/1}.Wrapper[_ngcontent-%COMP%]   .Albums-Album[_ngcontent-%COMP%]   .Content[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}.Wrapper[_ngcontent-%COMP%]   .Albums-Album[_ngcontent-%COMP%]   .Content[_ngcontent-%COMP%]   .Info[_ngcontent-%COMP%]{text-align:center;margin:8px}.Wrapper[_ngcontent-%COMP%]   .Albums-Album[_ngcontent-%COMP%]   .Content[_ngcontent-%COMP%]   .Info-Singer[_ngcontent-%COMP%]{font-family:Roboto;font-size:24px;font-weight:700}@media screen and (max-width: 1200px){.Wrapper[_ngcontent-%COMP%]   .Albums-Album[_ngcontent-%COMP%]   .Content[_ngcontent-%COMP%]   .Info-Singer[_ngcontent-%COMP%]{font-family:Roboto;font-size:16px;font-weight:400;font-weight:700}}.Wrapper[_ngcontent-%COMP%]   .Albums-Album[_ngcontent-%COMP%]   .Content[_ngcontent-%COMP%]   .Info-Name[_ngcontent-%COMP%], .Wrapper[_ngcontent-%COMP%]   .Albums-Album[_ngcontent-%COMP%]   .Content[_ngcontent-%COMP%]   .Info-Link[_ngcontent-%COMP%]{font-family:Roboto;font-size:16px;font-weight:400;font-weight:700}@media screen and (max-width: 1200px){.Wrapper[_ngcontent-%COMP%]   .Albums-Album[_ngcontent-%COMP%]   .Content[_ngcontent-%COMP%]   .Info-Name[_ngcontent-%COMP%], .Wrapper[_ngcontent-%COMP%]   .Albums-Album[_ngcontent-%COMP%]   .Content[_ngcontent-%COMP%]   .Info-Link[_ngcontent-%COMP%]{font-family:Roboto;font-size:12px;font-weight:400}}.Wrapper[_ngcontent-%COMP%]   .Albums-Album[_ngcontent-%COMP%]   .Content[_ngcontent-%COMP%]   .Info-Link[_ngcontent-%COMP%]{margin-bottom:24px;text-decoration:underline;color:#e91e63}@media screen and (max-width: 1200px){.Wrapper[_ngcontent-%COMP%]   .Albums-Album[_ngcontent-%COMP%]   .Content[_ngcontent-%COMP%]   .Info-Link[_ngcontent-%COMP%]{margin-bottom:8px}}.Wrapper[_ngcontent-%COMP%]   .Albums-Album.hover[_ngcontent-%COMP%]{background-image:none!important;background-color:#111;border:1px solid #fff}"]}),n})(),J=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[c.ez,l.UX,v.q,m.Bz.forChild([{path:"",component:k}])]}),n})()}}]);